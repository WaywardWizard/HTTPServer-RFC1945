I had to put the -lpthread argument to gcc last for it to work on nectar (but it worked as the first arg on my machine)
